<!DOCTYPE html>
<html>

<head>
    <meta name="description" content="Leaflet Template">
    <title>Modern Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" />
    <link rel="stylesheet" type="text/css" href="duan.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>

<body>
    <div id="best-route"></div>
    <div id="map-container">
        <div class="toolbar">
            <label for="arrival-input">Arrival:</label>
            <input type="text" id="arrival-input" name="arrival-input">
            <label for="destination-input">Destination:</label>
            <input type="text" id="destination-input" name="destination-input">
            <button onclick="showBestRoute()">Show Best Route</button>
        </div>
        <div id="map"></div>
        <div id="legend">
            <h3>Legend:</h3>
            <p><span class="dot red"></span>High congestion</p>
            <p><span class="dot yellow"></span>Medium congestion</p>
            <p><span class="dot green"></span>Low congestion</p>
        </div>
    </div>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
    <script src="duan.js"></script>
    <script>
    function fetchSensors() {
            fetch('http://localhost:3000/sensors')
            .then(response => response.json())
            .then(sensors => {
                console.log(sensors);
                updateMap(sensors);
            });
        }
        fetchSensors();
        setInterval(fetchSensors, 10000);
    </script>
</body>

</html>
